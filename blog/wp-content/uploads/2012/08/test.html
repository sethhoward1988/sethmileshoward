
<html>
    <head>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">// Normal jQuery</script> 
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js">// jQuery UI</script>
    </head>
    <body style="margin-top:10px">
        <div style="position:relative;width:500px;height:300px;border:1px solid darkred;border-radius:3px;">
            <div id="position" style="position:absolute; width:250px; border-radius:3px; height:25px; color:white; background-color:black;top:50px;visibility:visible;">Current Div Position: Absolute</div>
        </div>
        <input id="positionButtonDemo" type="button" value="animate">
        <script>
        $('#positionButtonDemo').on('click',function(){
            if($('#position').css('position') == 'fixed'){
                var el = $('#position');  
                // Get the static position
                var end = el.position();
                var top = el.css('top');
                
                // Turn it back to absolute
                el.css({
                    top:end.top - 10,
                    position:'absolute'
                })
                // Animate to the proper position
                el.animate({
                    top: top
                },function(){
                    el.text('Current Div Position: Absolute')
                }); 
            } else {
                //From absolute to fixed
                var el = $('#position');   
                el.css({
                    visibility:'hidden',
                    position:'fixed'
                })

                // Get the static position
                var end = el.position();
                var top = el.css('top');

                // Turn it back to absolute
                el.css({
                    visibility:'visible',
                    position:'absolute'
                })

                // Animate to the static position
                el.animate({ 
                    top: end.top - 10
                },function(){
                    el.css({
                        position:'fixed',
                        top:top
                    }).text('Current Div Position: Fixed')
                });    
            }
        });
        </script>
    </body>
</html>


